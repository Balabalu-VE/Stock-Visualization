<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D3.js Example</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
    <script>
        d3.csv("final_stock.csv").then(function(data) {
            const maxCloseByStock = {};

            // Iterate over each row to find the maximum close price for each stock
            data.forEach(function(d) {
                const stockName = d.StockName;
                const close = parseFloat(d.Close);

                // Update maxCloseByStock object with the maximum close price for each stock
                if (!maxCloseByStock[stockName] || close > maxCloseByStock[stockName]) {
                    maxCloseByStock[stockName] = close;
                }
            });

            // Calculate the maximum close price divided by the stock name
            const maxCloseDividedByStock = {};
            for (const stockName in maxCloseByStock) {
                maxCloseDividedByStock[stockName] = maxCloseByStock[stockName] / parseInt(stockName);
            }

            // Display the result
            console.log(maxCloseDividedByStock);
        });
    </script>
</body>
</html>
